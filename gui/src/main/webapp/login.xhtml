<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="jakarta.faces.html"
xmlns:fn="jakarta.tags.functions"
xmlns:f="jakarta.faces.core"
xmlns:p="http://primefaces.org/ui">

<f:view locale="#{userSession.locale}"/>
<h:head>
	<link rel="shortcut icon" type="image/x-icon" href="#{request.contextPath}/favicon.ico"/>
	<meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>
	<meta http-equiv="refresh" content="#{session.maxInactiveInterval};url=#{request.scheme}://#{request.serverName}:#{request.serverPort}#{request.contextPath}"/>
	<link type="text/css" rel="stylesheet" href="#{request.contextPath}/css/default.css"/>
</h:head>

<body>

	<p:growl id="messages" showDetail="true" life="3000" skipDetailIfEqualsSummary="true" />
	<h:form id="form">

	<p:dialog id="dialog" visible="true" header="#{i18n.login_title}" widgetVar="dlg" modal="true" closable="false">
		<h:panelGrid columns="2" cellpadding="3">

			<h:outputLabel styleClass="label-field-mandatory" value="#{i18n.login_username} *:"/>
			<p:inputText id="txtUserName" value="#{userSession.principal.name}" required="true" placeholder="#{i18n.login_username}">
				<f:validateRequired/>
			</p:inputText>

			<h:outputLabel styleClass="label-field-mandatory" value="#{i18n.login_password} *:"/>
			<p:password id="txtPassword" feedback="false" value="#{userSession.principal.password}" placeholder="#{i18n.login_password}">
			</p:password>

			<h:outputLabel value="#{i18n.login_language} *:" styleClass="label-field-mandatory" for="cboLocale"/>
			<p:selectOneMenu id="cboLocale" valueChangeListener="#{userSession.onLocaleChanged}" value="#{userSession.localeCode}">
				<f:selectItems value="#{userSession.supportedLocales}"/>
			</p:selectOneMenu>

			<p:commandButton id="cmdLogin" icon="pi pi-sign-in" value="#{i18n.login_command}" ajax="false" action="#{userSession.login}"/>
			<p:commandButton id="cmdResetPW" icon="pi pi-key" value="#{i18n.command_resetpw}" ajax="true" onclick="PF('resetPWConfirm').show()" class="btn-dangerous" style="float:right;margin-right:0"/>

		</h:panelGrid>
	</p:dialog>

	<p:confirmDialog modal="true" closeOnEscape="true" message="#{i18n.dialog_resetpw_question}" header="#{i18n.dialog_resetpw_title}" severity="warn" widgetVar="resetPWConfirm">
		<p:commandButton value="#{i18n.command_yes}" oncomplete="PF('resetPWConfirm').hide()" actionListener="#{userSession.resetPassword}" id="panData_cmdYes" ajax="false"/>
		<p:commandButton value="#{i18n.command_no}" onclick="PF('resetPWConfirm').hide()" type="button"/>
	</p:confirmDialog>


	</h:form>
</body>
</html>
