<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="jakarta.faces.html"
	xmlns:f="jakarta.faces.core"
	xmlns:ui="jakarta.faces.facelets"
	xmlns:fn="jakarta.tags.functions"
	xmlns:p="http://primefaces.org/ui">

<f:view locale="#{passwordReset.locale}"/>

<h:head>
	<link rel="shortcut icon" type="image/x-icon" href="#{request.contextPath}/favicon.ico"/>
	<meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>
	<link type="text/css" rel="stylesheet" href="#{request.contextPath}/css/default.css"/>
</h:head>


<f:metadata>
	<f:viewParam name="uuid" value="#{passwordReset.uuid}"/>
	<f:viewAction action="#{passwordReset.initView()}"/>
</f:metadata>


<h:body>
	<p:growl id="messages" showDetail="true" life="6000" skipDetailIfEqualsSummary="true" />

	<h:form id="form">
		<h:panelGrid columns="2">
			<div class="pi pi-key" style="font-size: 2em"/>
			<h:outputText id="lblFormTitle" value="#{i18n.form_resetpassworddialog_title}" styleClass="label-form-title"/>
		</h:panelGrid>
		
		<h:panelGrid columns="1" rendered="#{passwordReset.passwordResetDTO != null}">
			<h:outputText value="#{passwordReset.passwordResetDTO.userName}" styleClass="header-label"/>
		</h:panelGrid>
		<h:panelGrid columns="1" rendered="#{passwordReset.passwordResetDTO == null}">
			<h:outputText value="#{i18n.form_resetpassworddialog_invalidlink}" styleClass="header-label"/>
		</h:panelGrid>

		<p:panel rendered="#{passwordReset.passwordResetDTO != null}">
			<h:panelGrid columns="2">

				<h:outputLabel value="#{i18n.field_changepassworddialog_txtnewpassword} *:" styleClass="label-field-mandatory" for="txtNewPassword"/>
				<p:password id="txtNewPassword" value="#{passwordReset.newPassword}">
					<f:validateRequired/>
				</p:password>

				<h:outputLabel value="#{i18n.field_changepassworddialog_txtnewpasswordconfirm} *:" styleClass="label-field-mandatory" for="txtNewPasswordConfirm"/>
				<p:password id="txtNewPasswordConfirm" value="#{passwordReset.confirmedPassword}">
					<f:validateRequired/>
				</p:password>

			</h:panelGrid>
		</p:panel>

		<p/>

		<h:panelGrid columns="1" rendered="#{passwordReset.passwordResetDTO != null}">
			<p:commandButton value="#{i18n.command_save}" icon="pi pi-save" action="#{passwordReset.changePassword}" ajax="false"/>
		</h:panelGrid>
	</h:form>

</h:body>
</html>
